schema: '2.0'
stages:
  retrieve_data:
    cmd: python src/data/retrieve_raw_data.py
    deps:
    - path: src/data/retrieve_raw_data.py
      hash: md5
      md5: 8be5dd91f1c815c403e2f6bb37506733
      size: 25888
    outs:
    - path: data/raw
      hash: md5
      md5: 8658ca6f418c4118dd9bc3766dd8860c.dir
      size: 9121099
      nfiles: 2
  process_data:
    cmd: python src/data/process_data.py
    deps:
    - path: data/raw
      hash: md5
      md5: 8658ca6f418c4118dd9bc3766dd8860c.dir
      size: 9121099
      nfiles: 2
    - path: src/data/process_data.py
      hash: md5
      md5: 7816efee98d7ac257833567ee2751262
      size: 12605
    outs:
    - path: data/processed/books.csv
      hash: md5
      md5: b2d45b08821aca6735f5857268ddafd6
      size: 315151
    - path: data/processed/merged_test.csv
      hash: md5
      md5: a67bebd586a83e6844ded16ca83ae9d2
      size: 109624372
    - path: data/processed/merged_train.csv
      hash: md5
      md5: a4dfa056ffc8f604c25a5c5b298b4914
      size: 437631814
  build_features:
    cmd: python src/features/build_features.py
    deps:
    - path: data/processed/books.csv
      hash: md5
      md5: b2d45b08821aca6735f5857268ddafd6
      size: 315151
    - path: data/processed/merged_train.csv
      hash: md5
      md5: a4dfa056ffc8f604c25a5c5b298b4914
      size: 437631814
    - path: src/features/build_features.py
      hash: md5
      md5: 7129fda6375b6f8b553d5f14c521e4ba
      size: 24899
    outs:
    - path: data/features/book_ids.npy
      hash: md5
      md5: ab0aed88a5968e3bc8382d736dbd401c
      size: 3776
    - path: data/features/user_item_matrix.npz
      hash: md5
      md5: b21a5eb1548def941d9f14268312319a
      size: 643777
  train_model:
    cmd: python src/models/train_model.py --config config/model_params.yaml
    deps:
    - path: config/model_params.yaml
      hash: md5
      md5: 0b39f71305d383e678ff93c6ab396885
      size: 773
    - path: data/features/book_ids.npy
      hash: md5
      md5: ab0aed88a5968e3bc8382d736dbd401c
      size: 3776
    - path: data/features/user_item_matrix.npz
      hash: md5
      md5: b21a5eb1548def941d9f14268312319a
      size: 643777
    - path: src/models/train_model.py
      hash: md5
      md5: e960d9810b964dcd4d3d6e4afdc25f87
      size: 21708
    outs:
    - path: models/collaborative.pkl
      hash: md5
      md5: 249092fcec5d6b1723eb5c0b0b5ad209
      size: 15025437
  evaluate_model:
    cmd: python src/models/evaluate_model.py --model-path models/collaborative.pkl
    deps:
    - path: data/processed/merged_test.csv
      hash: md5
      md5: a67bebd586a83e6844ded16ca83ae9d2
      size: 109624372
    - path: models/collaborative.pkl
      hash: md5
      md5: 249092fcec5d6b1723eb5c0b0b5ad209
      size: 15025437
    - path: src/models/evaluate_model.py
      hash: md5
      md5: 00cf4b0745f59a68d3c381ffb2a2d411
      size: 17296
    outs:
    - path: data/results
      hash: md5
      md5: d2691833f994e30347413d53cd143121.dir
      size: 206
      nfiles: 1
